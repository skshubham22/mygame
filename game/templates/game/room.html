{% extends 'game/base.html' %}
{% load static %}

{% block title %}Game Room - {{ room_code }}{% endblock %}

{% block content %}
<div class="container">
    <div class="header">
        <h1>Room: <span id="display-room-code">{{ room_code }}</span>
            <button class="btn-small" onclick="copyCode()">Copy</button>
        </h1>
        <div id="status">Waiting for opponent...</div>
        <div id="connection-status" style="font-size: 0.8rem; color: #fab1a0; margin-top: 5px;">Connecting...</div>
    </div>

    <div class="players-list" id="players-list">
        <!-- Players will be listed here -->
    </div>

    <div id="game-board" class="board {{ game_type|lower }}">
        <!-- Board cells will be generated by JS -->
    </div>

    <!-- Result Modal -->
    <div id="result-modal" class="modal">
        <div class="modal-content">
            <h2 id="result-title">Game Over!</h2>
            <div id="result-message">Winner: Player Name</div>
            <button onclick="resetGame()" class="btn btn-primary" style="margin-top: 20px;">Play Again</button>
        </div>
    </div>


    <div class="controls">
        <button onclick="window.location.href='/'" class="btn btn-secondary">Leave Room</button>
    </div>
</div>

{{ room_code|json_script:"room-code" }}
{{ game_type|json_script:"game-type" }}
{% endblock %}

{% block extra_scripts %}
<script src="{% static 'game/game.js' %}"></script>
<script>
    function copyCode() {
        const code = document.getElementById('display-room-code').innerText;
        navigator.clipboard.writeText(code).then(() => {
            alert('Room code copied: ' + code);
        });
    }
</script>
{% endblock %}